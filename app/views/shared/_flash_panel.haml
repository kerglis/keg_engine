- msg = []; cl = []
- flash.each do |type, txt|
  - cl << "alert-#{type}"; msg << txt

- msg_str = msg.compact.join("<br/>")
- cl_str = cl.compact.join(" ").gsub!("notice", "success")
- cl_top = msg_str.present? ? "" : "hide"

#flash_panel{:class => cl_top}
  .alert.alert-block{:class => cl_str, :"data-dismiss" => "alert" }
    %a.close{:href =>"#"}Ã—
    .flash-message
      = msg_str

:javascript
  $(function() {
    $("#flash_panel").delay(3000).fadeOut(3000);
  });